<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../Global/root.css">
    <link rel="stylesheet" href="./lesson13_remake.css">
    <title>Lesson 13 - Forms & Validation</title>

    <!-- protection script -->
    <script>
        (function() {
            'use strict';
            
            function getCurrentLessonNumber() {
                const path = window.location.pathname;
                const match = path.match(/lesson(\d+)/);
                return match ? parseInt(match[1]) : 1;
            }
        
            function isLessonCompleted(lessonNumber) {
                return localStorage.getItem(`partB_lesson${lessonNumber}_remake_complete`) === 'true';
            }
        
            function canAccessLesson(lessonNumber) {
                if (lessonNumber === 1) return true;
                
                for (let i = 1; i < lessonNumber; i++) {
                    if (!isLessonCompleted(i)) {
                        return false;
                    }
                }
                return true;
            }
        
            function getNextAvailableLesson() {
                for (let i = 1; i <= 15; i++) {
                    if (!isLessonCompleted(i)) {
                        return i;
                    }
                }
                return 15;
            }
        
            function showAccessDenied() {
                const currentLesson = getCurrentLessonNumber();
                const nextLesson = getNextAvailableLesson();
                const requiredLesson = currentLesson - 1;
                
                document.body.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-family: 'Nunito', sans-serif; z-index: 10000;">
                        <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2); text-align: center; max-width: 450px; margin: 20px;">
                            <div style="font-size: 4em; margin-bottom: 20px;">üîí</div>
                            <h1 style="color: #e74c3c; margin: 0 0 15px 0; font-size: 1.6em;">Access Denied</h1>
                            <p style="margin: 0 0 20px 0; line-height: 1.6; color: #555; font-size: 1.1em;">You must complete <strong>Lesson ${requiredLesson}</strong> before accessing Lesson ${currentLesson}.</p>
                            <button onclick="window.location.href='../lesson${nextLesson}/lesson${nextLesson}_remake.html'" style="background: linear-gradient(135deg, #007BFF, #0056b3); color: white; border: none; padding: 15px 30px; border-radius: 30px; font-weight: 600; cursor: pointer; font-size: 1.1em;">Take Me to Lesson ${nextLesson}</button>
                        </div>
                    </div>
                `;
            }
        
            // IMMEDIATE CHECK
            const currentLesson = getCurrentLessonNumber();
            
            if (!canAccessLesson(currentLesson)) {
                // Don't hide the document immediately - wait for DOM to be ready
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', showAccessDenied);
                } else {
                    // DOM is already ready, show access denied immediately
                    showAccessDenied();
                }
                return; // Exit early
            }
        })();
        </script>
</head>
<body>
    <a href="../../index.html" class="home-button" title="Back to PartA">üè†</a>
    
    <header>
        <h1>Lesson 13 ‚Äî Forms & Validation</h1>
    </header>

    <main class="container">
        <!-- Progress Tracker -->
        <div class="progress-steps">
            <div class="step active">
                <div class="step-circle">1</div>
                <div class="step-label">Learn</div>
            </div>
            <div class="step">
                <div class="step-circle">2</div>
                <div class="step-label">Practice</div>
            </div>
            <div class="step">
                <div class="step-circle">3</div>
                <div class="step-label">Complete</div>
            </div>
        </div>

        <!-- Enhanced Introduction -->
        <section class="card">
            <h2>
                <span class="section-icon">üìù</span>
                Form Validation ‚Äî Making Forms Smart & User-Friendly!
            </h2>
            <p>Form validation is like having a helpful assistant that checks user input before it gets sent anywhere. It catches mistakes, guides users, and makes sure your forms work perfectly every time!</p>
            
            <div class="intro-highlight">
                Think of validation as a <strong>quality check</strong> ‚Äî like spell-check for text, but for any kind of form data. It prevents errors, improves user experience, and keeps bad data out of your system.
            </div>
            
            <h3>üéØ The Four Validation Steps</h3>
            <div class="validation-comparison">
                <div class="comparison-card capture-card" onclick="highlightValidation('capture')">
                    <span class="comparison-icon">üìã</span>
                    <h4>Capture Input</h4>
                    <p>Get values from form fields using .value</p>
                    <div class="comparison-code">input.value</div>
                </div>
                
                <div class="comparison-card check-card" onclick="highlightValidation('check')">
                    <span class="comparison-icon">‚úÖ</span>
                    <h4>Check Rules</h4>
                    <p>Test input against validation requirements</p>
                    <div class="comparison-code">if (value.length > 0) {...}</div>
                </div>
                
                <div class="comparison-card feedback-card" onclick="highlightValidation('feedback')">
                    <span class="comparison-icon">üí¨</span>
                    <h4>Show Feedback</h4>
                    <p>Display helpful messages to guide users</p>
                    <div class="comparison-code">element.innerHTML = "message"</div>
                </div>
                
                <div class="comparison-card control-card" onclick="highlightValidation('control')">
                    <span class="comparison-icon">üéõÔ∏è</span>
                    <h4>Control Submission</h4>
                    <p>Allow or prevent form from being submitted</p>
                    <div class="comparison-code">event.preventDefault()</div>
                </div>
            </div>
        </section>

        <!-- Interactive Form Validation Playground -->
        <section class="card">
            <h2>
                <span class="section-icon">üéÆ</span>
                Interactive Form Validation Demo
            </h2>
            <p>Try typing in the form below to see validation in real-time! Watch how different inputs trigger different validation responses.</p>
            
            <div class="validation-playground">
                <div class="playground-controls">
                    <button class="validation-btn capture-btn active" data-step="capture">
                        üìã Capture
                    </button>
                    <button class="validation-btn check-btn" data-step="check">
                        ‚úÖ Check
                    </button>
                    <button class="validation-btn feedback-btn" data-step="feedback">
                        üí¨ Feedback
                    </button>
                    <button class="validation-btn control-btn" data-step="control">
                        üéõÔ∏è Control
                    </button>
                </div>
                
                <div class="demo-form-container">
                    <form class="demo-form" id="demo-form">
                        <div class="form-group">
                            <label for="demo-username">Username:</label>
                            <input type="text" id="demo-username" placeholder="Enter username (try different lengths)" required>
                        </div>
                        <div class="form-group">
                            <label for="demo-email">Email:</label>
                            <input type="email" id="demo-email" placeholder="Enter email (try valid/invalid formats)" required>
                        </div>
                        <button type="submit" class="demo-submit">Submit Form</button>
                        <div class="demo-feedback" id="demo-feedback">Start typing to see validation in action!</div>
                    </form>
                    
                    <div class="validation-flow" id="validation-flow">
                        <div class="flow-step" data-step="capture">
                            <div class="step-icon">üìã</div>
                            <div class="step-title">Input Captured</div>
                            <div class="step-detail" id="capture-detail">Waiting for input...</div>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step" data-step="check">
                            <div class="step-icon">‚úÖ</div>
                            <div class="step-title">Validation Check</div>
                            <div class="step-detail" id="check-detail">No validation yet</div>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step" data-step="feedback">
                            <div class="step-icon">üí¨</div>
                            <div class="step-title">User Feedback</div>
                            <div class="step-detail" id="feedback-detail">No feedback yet</div>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step" data-step="control">
                            <div class="step-icon">üéõÔ∏è</div>
                            <div class="step-title">Form Control</div>
                            <div class="step-detail" id="control-detail">Ready to submit</div>
                        </div>
                    </div>
                </div>
                
                <div class="validation-info" id="validation-info">
                    <h4>üìã Input Capture with .value</h4>
                    <p>The <code>.value</code> property gets the current content of form input elements. Every time a user types, we can access what they've entered and check if it meets our requirements.</p>
                </div>
            </div>
        </section>

        <!-- Form Validation Concepts Deep Dive -->
        <section class="card">
            <h2>
                <span class="section-icon">üîç</span>
                Form Validation Concepts Explained
            </h2>
            <p>Let's break down each part of form validation with interactive examples:</p>
            
            <div class="concepts-grid">
                <div class="concept-card" data-concept="input">
                    <div class="concept-icon">üìã</div>
                    <h4>Getting Input Values</h4>
                    <p>Use <code>.value</code> to access what users type in form fields</p>
                    <div class="concept-example">
                        <code>let userInput = document.getElementById("username").value;</code>
                    </div>
                    <button class="concept-btn" onclick="demonstrateConcept('input')">See Example</button>
                </div>
                
                <div class="concept-card" data-concept="validation">
                    <div class="concept-icon">‚úÖ</div>
                    <h4>Validation Logic</h4>
                    <p>Check input against rules using conditions and comparisons</p>
                    <div class="concept-example">
                        <code>if (userInput.length < 3) { /* show error */ }</code>
                    </div>
                    <button class="concept-btn" onclick="demonstrateConcept('validation')">See Example</button>
                </div>
                
                <div class="concept-card" data-concept="prevent">
                    <div class="concept-icon">üõë</div>
                    <h4>Preventing Submission</h4>
                    <p>Stop forms from submitting when validation fails</p>
                    <div class="concept-example">
                        <code>event.preventDefault(); // Stop submission</code>
                    </div>
                    <button class="concept-btn" onclick="demonstrateConcept('prevent')">See Example</button>
                </div>
                
                <div class="concept-card" data-concept="feedback">
                    <div class="concept-icon">üí¨</div>
                    <h4>User Feedback</h4>
                    <p>Show helpful messages to guide users to success</p>
                    <div class="concept-example">
                        <code>feedbackElement.innerHTML = "Username is too short!";</code>
                    </div>
                    <button class="concept-btn" onclick="demonstrateConcept('feedback')">See Example</button>
                </div>
            </div>
            
            <div class="concept-demonstration" id="concept-demo">
                <h4>üí° Click any concept above to see it in action!</h4>
                <p>Interactive demonstrations will appear here to show you exactly how each validation concept works.</p>
            </div>
        </section>

        <!-- Common Validation Patterns -->
        <section class="card">
            <h2>
                <span class="section-icon">üõ†Ô∏è</span>
                Common Validation Patterns
            </h2>
            <p>Here are the most useful validation patterns you'll use in real projects:</p>
            
            <div class="patterns-grid">
                <div class="pattern-card">
                    <h4>üìù Required Fields</h4>
                    <p>Make sure important fields aren't left empty</p>
                    <div class="pattern-code">
                        <pre>if (input.value.trim().length === 0) {
    showError("This field is required!");
    return false;
}</pre>
                    </div>
                </div>
                
                <div class="pattern-card">
                    <h4>üìè Length Validation</h4>
                    <p>Check minimum and maximum character limits</p>
                    <div class="pattern-code">
                        <pre>if (input.value.length < 3) {
    showError("Must be at least 3 characters!");
} else if (input.value.length > 20) {
    showError("Must be less than 20 characters!");
}</pre>
                    </div>
                </div>
                
                <div class="pattern-card">
                    <h4>üìß Email Format</h4>
                    <p>Validate email addresses using simple checks</p>
                    <div class="pattern-code">
                        <pre>if (!input.value.includes("@") || !input.value.includes(".")) {
    showError("Please enter a valid email address!");
}</pre>
                    </div>
                </div>
                
                <div class="pattern-card">
                    <h4>üî¢ Number Validation</h4>
                    <p>Check if input is a valid number within range</p>
                    <div class="pattern-code">
                        <pre>let num = parseInt(input.value);
if (isNaN(num) || num < 1 || num > 100) {
    showError("Enter a number between 1-100!");
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Complete Form Validation Example -->
        <section class="card">
            <h2>
                <span class="section-icon">üéØ</span>
                Complete Form Validation Example
            </h2>
            <p>Here's a complete example showing all validation concepts working together:</p>
            
            <div class="two-col">
                <div class="pane">
                    <h3>
                        <span class="pane-icon">üíª</span>
                        Complete HTML + CSS + JS
                    </h3>
                    <textarea readonly id="example-code"><!DOCTYPE html>
<html>
<head>
    <title>Form Validation Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background: #f8f9ff;
        }
        
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        @media (max-width: 480px) {
            .form-container {
                padding: 10px;
                font-size: 0.8rem;
            }

            #username {
                font-size: 0.8rem;
            }

            #email {
                font-size: 0.8rem;
            }

            #age {
                font-size: 0.8rem;
            }

            h2 {
                text-align: center;
            }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #dde7ff;
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        input:focus {
            border-color: #007BFF;
            outline: none;
        }
        
        input.error {
            border-color: #e74c3c;
            background: #ffebee;
        }
        
        input.success {
            border-color: #27ae60;
            background: #e8f5e8;
        }
        
        .feedback {
            margin-top: 5px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .feedback.error {
            color: #e74c3c;
        }
        
        .feedback.success {
            color: #27ae60;
        }
        
        button {
            background: #007BFF;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h2>üéØ Registration Form with Validation</h2>
        
        <form id="registrationForm">
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" placeholder="Enter username (min 3 chars)">
                <div class="feedback" id="username-feedback"></div>
            </div>
            
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" placeholder="Enter your email address">
                <div class="feedback" id="email-feedback"></div>
            </div>
            
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="text" id="age" placeholder="Enter age (18-99)">
                <div class="feedback" id="age-feedback"></div>
            </div>
            
            <button type="submit">Create Account</button>
            <div class="feedback" id="form-feedback"></div>
        </form>
    </div>

    <script>
        // Get form elements
        const form = document.getElementById('registrationForm');
        const usernameInput = document.getElementById('username');
        const emailInput = document.getElementById('email');
        const ageInput = document.getElementById('age');

        // Validation functions
        function validateUsername() {
            const value = usernameInput.value.trim();
            const feedback = document.getElementById('username-feedback');
            
            if (value.length === 0) {
                showFieldError(usernameInput, feedback, "Username is required!");
                return false;
            } else if (value.length < 3) {
                showFieldError(usernameInput, feedback, "Username must be at least 3 characters!");
                return false;
            } else {
                showFieldSuccess(usernameInput, feedback, "‚úÖ Username looks good!");
                return true;
            }
        }

        function validateEmail() {
            const value = emailInput.value.trim();
            const feedback = document.getElementById('email-feedback');
            
            if (value.length === 0) {
                showFieldError(emailInput, feedback, "Email is required!");
                return false;
            } else if (!value.includes("@") || !value.includes(".")) {
                showFieldError(emailInput, feedback, "Please enter a valid email address!");
                return false;
            } else {
                showFieldSuccess(emailInput, feedback, "‚úÖ Email format is valid!");
                return true;
            }
        }

        function validateAge() {
            const value = ageInput.value.trim();
            const feedback = document.getElementById('age-feedback');
            const age = parseInt(value);
            
            if (value.length === 0) {
                showFieldError(ageInput, feedback, "Age is required!");
                return false;
            } else if (isNaN(age) || age < 18 || age > 99) {
                showFieldError(ageInput, feedback, "Please enter a valid age between 18-99!");
                return false;
            } else {
                showFieldSuccess(ageInput, feedback, "‚úÖ Age is valid!");
                return true;
            }
        }

        // Helper functions
        function showFieldError(input, feedbackElement, message) {
            input.className = 'error';
            feedbackElement.className = 'feedback error';
            feedbackElement.innerHTML = message;
        }

        function showFieldSuccess(input, feedbackElement, message) {
            input.className = 'success';
            feedbackElement.className = 'feedback success';
            feedbackElement.innerHTML = message;
        }

        // Real-time validation
        usernameInput.addEventListener('input', validateUsername);
        emailInput.addEventListener('input', validateEmail);
        ageInput.addEventListener('input', validateAge);

        // Form submission validation
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Always prevent default first
            
            const isUsernameValid = validateUsername();
            const isEmailValid = validateEmail();
            const isAgeValid = validateAge();
            
            const formFeedback = document.getElementById('form-feedback');
            
            if (isUsernameValid && isEmailValid && isAgeValid) {
                formFeedback.className = 'feedback success';
                formFeedback.innerHTML = 'üéâ Form submitted successfully! All fields are valid.';
            } else {
                formFeedback.className = 'feedback error';
                formFeedback.innerHTML = '‚ö†Ô∏è Please fix the errors above before submitting.';
            }
        });
    </script>
</body>
</html></textarea>
                </div>
                <div class="pane">
                    <h3>
                        <span class="pane-icon">üëÅÔ∏è</span>
                        Live Demo
                    </h3>
                    <div class="frame-wrap">
                        <iframe id="example-preview" title="Form Validation Demo"></iframe>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Task -->
        <section class="card">
            <h2>
                <span class="section-icon">üéØ</span>
                Your Form Validation Challenge
            </h2>
            <p>Create a contact form with JavaScript validation. Your form should include:</p>
            <ul>
                <li>‚úÖ A <strong>complete HTML structure</strong> with head and body</li>
                <li>‚úÖ A <strong>form element</strong> with at least 3 input fields</li>
                <li>‚úÖ <strong>Unique ID attributes</strong> for all form elements</li>
                <li>‚úÖ <strong>JavaScript validation</strong> using .value to check inputs</li>
                <li>‚úÖ <strong>preventDefault()</strong> to stop submission on validation failure</li>
                <li>‚úÖ <strong>User feedback</strong> showing specific error or success messages</li>
                <li>‚úÖ <strong>Real-time validation</strong> as users type (bonus)</li>
                <li>üé® <strong>CSS styling</strong> to make it look professional</li>
            </ul>
            
            <div class="intro-highlight">
                <strong>Key Requirements:</strong> Your form must validate at least 3 fields, use <code>event.preventDefault()</code> to control submission, and provide clear feedback to users about what needs to be fixed.
            </div>
            
            <div class="two-col">
                <div class="pane">
                    <h3>
                        <span class="pane-icon">‚úèÔ∏è</span>
                        Write Your HTML, CSS & JavaScript
                    </h3>
                    <textarea id="task-code" placeholder="Create your form validation here...

Hint: Start with a complete HTML structure:

<!DOCTYPE html>
<html>
<head>
    <title>Contact Form</title>
    <style>
        /* Add your CSS styling here */
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
        }
        
        input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #ddd;
            border-radius: 4px;
        }
        
        .error { border-color: #e74c3c; }
        .feedback { font-weight: 600; margin-top: 5px; }
        .feedback.error { color: #e74c3c; }
        .feedback.success { color: #27ae60; }
    </style>
</head>
<body>
    <form id='contactForm'>
        <label>Name:</label>
        <input type='text' id='name' placeholder='Enter your name'>
        <div id='name-feedback' class='feedback'></div>
        
        <label>Email:</label>
        <input type='email' id='email' placeholder='Enter your email'>
        <div id='email-feedback' class='feedback'></div>
        
        <label>Message:</label>
        <textarea id='message' placeholder='Enter your message'></textarea>
        <div id='message-feedback' class='feedback'></div>
        
        <button type='submit'>Send Message</button>
        <div id='form-feedback' class='feedback'></div>
    </form>

    <script>
        // Your JavaScript validation code here
        const form = document.getElementById('contactForm');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const messageInput = document.getElementById('message');
        
        form.addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Add your validation logic here
            let isValid = true;
            
            // Validate name
            if (nameInput.value.trim().length === 0) {
                showError('name-feedback', 'Name is required!');
                isValid = false;
            }
            
            // Add more validation...
            
            if (isValid) {
                showSuccess('form-feedback', 'Message sent successfully!');
            }
        });
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.className = 'feedback error';
            element.innerHTML = message;
        }
        
        function showSuccess(elementId, message) {
            const element = document.getElementById(elementId);
            element.className = 'feedback success';
            element.innerHTML = message;
        }
    </script>
</body>
</html>"></textarea>
                </div>
                <div class="pane">
                    <h3>
                        <span class="pane-icon">üé≠</span>
                        Your Live Preview
                    </h3>
                    <div class="frame-wrap">
                        <iframe id="task-preview" title="Your Form Validation Result"></iframe>
                    </div>
                </div>
            </div>
            
            <div class="btns">
                <button class="btn-primary" onclick="checkAnswer()">
                    üîç Check My Code
                </button>
                <button class="btn-warn" onclick="showHint()">
                    üí° Need a Hint?
                </button>
                <button disabled id="nextLessonBtn">
                    ‚û°Ô∏è Next Lesson
                </button>
            </div>
            
            <div class="feedback" id="feedback"></div>
        </section>
    </main>

    <script src="../lesson-navigation.js"></script>
    <script src="./lesson13_remake.js"></script>
</body>
</html>